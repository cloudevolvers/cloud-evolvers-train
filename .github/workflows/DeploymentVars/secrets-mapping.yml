# üîê Secrets Mapping Configuration
# This file defines which environment variables should be sourced from GitHub Secrets
# 
# How it works:
# 1. GitHub Actions reads production.env (single source of truth)
# 2. This file identifies which variables are secrets
# 3. GitHub Actions overrides those variables with values from GitHub Secrets
# 4. Final environment is deployed to Azure Static Web Apps

secrets:
  # üè¢ GitHub Organization Secrets (shared across all repos in organization)
  organization:
    - name: API_KEY
      env_vars:
        - API_KEY
        - VITE_API_KEY  # Frontend also needs API key
      description: "API authentication key for Cloud Evolvers platform"
      required: true
      environments: ["production", "staging", "dev"]
  
  # üì¶ GitHub Repository Secrets (specific to this repository)
  repository:
    - name: EMAIL_AZURE_CLIENT_SECRET
      env_vars:
        - EMAIL_AZURE_CLIENT_SECRET
      description: "Azure AD Client Secret for Microsoft Graph API email functionality"
      required: true
      environments: ["production", "staging", "dev"]
    
    - name: AZURE_STATIC_WEB_APPS_API_TOKEN
      env_vars:
        - AZURE_STATIC_WEB_APPS_API_TOKEN
      description: "Deployment token for Azure Static Web Apps"
      required: true
      environments: ["production", "staging", "dev"]
      usage: "Used by GitHub Actions for deployment, not passed to app"
    
    - name: XEVOLVE_DEPLOY_CI_CD_SPN_APP_ID
      env_vars:
        - XEVOLVE_DEPLOY_CI_CD_SPN_APP_ID
      description: "Service Principal Application ID for CI/CD"
      required: true
      environments: ["production", "staging", "dev"]
      usage: "Used by GitHub Actions for Azure authentication"
    
    - name: XEVOLVE_DEPLOY_CI_CD_SPN_SECRET
      env_vars:
        - XEVOLVE_DEPLOY_CI_CD_SPN_SECRET
      description: "Service Principal Secret for CI/CD"
      required: true
      environments: ["production", "staging", "dev"]
      usage: "Used by GitHub Actions for Azure authentication"

# üìù How to add a new secret:
# 
# 1. Add the secret to GitHub:
#    - Organization secret: GitHub Org Settings ‚Üí Secrets ‚Üí New org secret
#    - Repository secret: Repo Settings ‚Üí Secrets ‚Üí New repo secret
# 
# 2. Add placeholder to production.env:
#    MY_NEW_SECRET=placeholder-will-be-replaced-by-github-secret
# 
# 3. Add mapping here:
#    repository:  # or 'organization'
#      - name: MY_NEW_SECRET
#        env_vars:
#          - MY_NEW_SECRET
#        description: "Description of what this secret does"
#        required: true
#        environments: ["production", "staging", "dev"]
# 
# 4. Commit and push - GitHub Actions will automatically use it!

# üîç Notes:
# - 'name': The name of the secret in GitHub Secrets
# - 'env_vars': List of environment variables to set (one secret can map to multiple vars)
# - 'description': What this secret is used for (documentation)
# - 'required': Whether deployment should fail if secret is missing
# - 'environments': Which environments need this secret
# - 'usage': Optional note about how/where the secret is used
